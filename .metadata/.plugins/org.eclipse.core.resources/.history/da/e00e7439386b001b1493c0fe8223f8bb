/**
 * 
 */

$("#idbtn").on("click", function(){
		idvalue = $("#id").val().trim();
		
		if(idvalue.length < 1){
			alert("id 입력하세요.");
			return false;
		}
		
		$.ajax({
			//project이름의 member는 context Root
			url : '/member/ID.do',
			type : "post",
			data : {"id": idvalue},
			success : function(res){
				$("#idspan").html(res.sw).css("color", "red");
			},
			error : function(xhr){
				alert("상태 : " +  xhr.status);
			},
			dataType : "json"
		})
	})
	
	// 우편번호 검색 - window
	$("#wzipbtn").on("click", function(){
		window.open("zipsearch.html", "우편번호찾기", "width=500 height=400");
	})
  	
  	// 우편번호 modal에서 동 입력후 확인버튼 클릭 이벤트
	$("#dongbtn").on("click", function(){
		//입력한값 가져오기
		dongvalue = $("#dong").val().trim();
		
		//서버로 전송(요청)
		$.ajax({
			url : "/member/DongSearch.do",
			data : {"dong" : dongvalue},
			type : "post",
			success : function(res){
				code = "<table border='1' class='table table-bordered'>";
				code += "<tr><td>우편번호</td>";
				code += "<td>주소</td>";
				code += "<td>번지</td></tr>";
				$.each(res, function(i, v){
					code += "<tr class='ziptr'><td>" + v.code + "</td>";
					code += "<td>" + v.addr + "</td>";
					code += "<td>" + v.bunji + "</td></tr>";
				})//each끝
				code += "</table>";
				
				$("#result1").html(code);
			},
			error : function(xhr){
				alert("상태 : " + xhr.status);
			},
			dataType : "json"
		})//ajax 끝
	})//button클릭
	
	// modal결과에서 원하는 행(주소)를 선택했을떄 이벤트
	// 동적으로 새롭게 생성된 요소 - delegate	
	$("#result1").on("click", ".ziptr", function(){
		zipcode = $("td:eq(0)", this).text();
		addr = $("td:eq(1)", this).text();
		
		// 폼에 출력
		$("#zip").val(zipcode);
		$("#add1").val(addr);
		
		// 모달창 닫기
		$("#myModal").modal('hide');
		
		// 모달창 내용 지우기
		$("#dong").val("");
		$("#result1").empty();
	})
	
	// 제출버튼 클릭 이벤트
  	$("#ff").on("submit", function(){//form의 제출버튼에 해당하는 함수
  		event.preventDefault();
  	  		
  		console.log($("#ff").serialize());
  		console.log($("#ff").serializeArray());
  		console.log($("#ff").serializeJSON());
  		
  		$.ajax({
  			url : "/member/Insert.do",
  			method : "post",
  			data : $("#ff").serializeJSON(),
  			success : function(res){
  				$("#submit").html(res.sw).css("color", "blue");
  			},
  			error : function(xhr){
  				alert("상태 : " + xhr.status);
  			},
  			dataType : "json"
  		})
  	})