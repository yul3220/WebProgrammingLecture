<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css" />
<script src="../js/jquery-3.5.1.min.js"></script>
<style>
	div.box {
		height: 400px;
	}

	.box div {
		width: 150px;
		margin: 5px;
		padding: 10px;
		float: left;
	}

</style>
<script>
	$(function() {
		//requerst 객체 생성
		xhr = new XMLHttpRequest();

		$("#text").on("click", function() {
			// 요청
			xhr.open("get", "text.jsp", true);
			xhr.send();

			// 응답
			xhr.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					res = this.responseText;
					//res = "홍길동/개나리/진달래/무궁화/백일홍/수선화"
					
					code = res.split("/");
					vhtml = "<ul>";
					$.each(code, function(i){
						//html += "<li>" + code[i] + "</li>";
						vhtml += `<li>${code[i]}</li>`;
					})
					vhtml += "</ul>";
					$("#result1").html(vhtml);
				}
			}
		})
		
		$("#arr").on("click", function(){
			xhr.open("get", "arr.jsp", true);//true를 작성하면 비동기로 진행한다는 뜻
			xhr.send();
			
			xhr.onreadystatechange = function(){
				if (this.readyState == 4 && this.status == 200){
					res = this.responseText;
					// res = ["홍길동", "수선화", "백일홍", "라일락", "벤자민"]
					res = JSON.parse(res);//json의 배열형태로 다시 바꿈
					
					code = "<ol>";
					$.each(res, function(i){
						code += `<li>${res[i]}</li>`;
					})
					code += "</ol>"
					$("#result2").html(code);
				}
			}
			
		})
	})
</script>
</head>

<body>
	<div class="box">

		<br><br>
		<input id="text" type="button" value="text" />
		<input id="arr" type="button" value="arr" />
		<input id="json" type="button" value="json" />
		<input id="jarr" type="button" value="jsonarr" />
		<br>
		<div id="result1"></div>
		<div id="result2"></div>
		<div id="result3"></div>
		<div id="result4"></div>
	</div>
</body>

</html>
